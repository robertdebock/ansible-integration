---
webservers:
  hosts:
    machine1.meinit.nl:
  vars:
    postfix_relayhost: "[machine4.meinit.nl]"
    rsyslog_remote: machine4.meinit.nl
    httpd_applications:
      - name: zabbix
        location: /zabbix
        backend_url: "https://machine4.meinit.nl:8080/zabbix"
      - name: roundcubemail
        location: /roundcubemail
        backend_url: "https://machine4.meinit.nl/roundcubemail"
      - name: rundeck
        location: /rundeck
        backend_url: "https://machine4.meinit.nl/rundeck"

applicationservers:
  hosts:
    machine2.meinit.nl:
  vars:
    postfix_relayhost: "[machine4.meinit.nl]"

databaseservers:
  hosts:
    machine3.meinit.nl:
  vars:
    postfix_relayhost: "[machine4.meinit.nl]"
    mysql_databases:
      - name: zabbix
      - name: roundcube
    mysql_users:
      - name: zabbix
        password: zabbix
        priv: "*.*:ALL"
        host: "{{ hostvars['machine1.meinit.nl']['ansible_default_ipv4']['address'] }}"
      - name: roundcube
        password: roundcube
        priv: "*.*:ALL"
        host: "{{ hostvars['machine1.meinit.nl']['ansible_default_ipv4']['address'] }}"

backendservers:
  hosts:
    machine4.meinit.nl:
  vars:
    postfix_mydestination: "meinit.nl, $mydomain, $myhostname, localhost.$mydomain, localhost"
    dns_zones:
      - name: example.com
        ttl: 3600
        ns:
          - name: dns1.example.com.
        mx:
          - name: mail1.example.com.
            priority: 10
        records:
          - name: www
            ttl: 60
            value: "{{ hostvars['machine1.meinit.nl']['ansible_default_ipv4']['address'] }}"
          - name: dns1
            value: "{{ hostvars['machine4.meinit.nl']['ansible_default_ipv4']['address'] }}"
          - name: mail1
            value: "{{ hostvars['machine4.meinit.nl']['ansible_default_ipv4']['address'] }}"
    phpmyadmin_database_host: machine3.meinit.nl
    roundcubemail_database_url: "mysql://roundcube:roundcube@{{ hostvars['machine3.meinit.nl']['inventory_hostname'] }}/roundcube"
    zabbix_server: present
    zabbix_server_database_host: "{{ hostvars['machine3.meinit.nl']['ansible_default_ipv4']['address'] }}"
    zabbix_web: present

all:
  vars:
    ansible_user: root
    ansible_ssh_private_key_file: terraform/id_rsa
    linux_users:
      - name: robertdb
        comment: Robert de Bock
        password: "$6$FHM5RfKd33/xKoUo$Io/VK01U7BXLE6HISycXevQiFYrWAGVV9i68roeo.iCeAJ64uRsTExhRYwrYW12bDQK1Pl3FGaMJ6i/QZDkEl1"
    rsyslog_receiver: yes
    zabbix_agent_server_address: machine4.meinit.nl
