---
- name: configure shared items for all machines.
  hosts: all:!localhost
  become: yes
  gather_facts: no

  roles:
    - robertdebock.bootstrap
    - robertdebock.digitalocean_agent
    - robertdebock.common
    - robertdebock.firewall
    - robertdebock.update
    - robertdebock.ntp
    - robertdebock.epel
    - robertdebock.fail2ban
    - robertdebock.postfix
    - robertdebock.rsyslog
    - robertdebock.users

- hosts: services
  become: yes
  gather_facts: no

  roles:
    - robertdebock.spamassassin
    - robertdebock.clamav
    - robertdebock.dovecot

- hosts: webappservers
  become: yes
  gather_facts: no

  roles:
    - robertdebock.mysql
    - robertdebock.python_pip
    - robertdebock.httpd
    - robertdebock.phpmyadmin
    - robertdebock.java
    - robertdebock.tomcat
